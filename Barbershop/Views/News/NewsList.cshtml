@model Barbershop.Models.ViewModels.NewsListVM

@{
    var newsListCount = Model.News.Count();
}

<div class="container">
    <div class="text-center">
        <button class="btn btn-dark filter-button" data-filter="all">Всі новини</button>
        @foreach (var obj in Model.News)
        {
                <button class="btn btn-outline-secondary filter-button" data-filter="@obj.Category.Replace(' ','_')">
                @obj.Category
                </button>
        }
        <br/>
        <div class="d-flex flex-wrap">
            @if (newsListCount > 0)
            {
                @for (int i = 0; i < newsListCount; i++)
                {
                    var news = Model.News.ElementAt(i);
                        <partial name="_IndividualNewsCard" model="news"></partial>
                    @if ((i + 1) % 3 == 0 && i != newsListCount - 1)
                    {
                                <div class="w-100"></div> 
                    }
                }
            }
            else
            {
                <p>Публікації відсутні.</p>
            }
        </div>
    </div>
</div>

@section Scripts{
        <script>
            $(document).ready(function () {

                $(".filter-button").click(function () {

                    var value = $(this).attr('data-filter');
                    if (value == "all") {
                        $('.filter').show('1000');
                    }
                    else {
                        $(".filter").not('.' + value).hide('3000');
                        $('.filter').filter('.' + value).show('3000');

                    }
                });

            });
        </script>
}
